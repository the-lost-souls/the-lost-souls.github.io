(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"/v/b":function(t,e,n){"use strict";n.r(e);var i=n("8Y7J"),o=n("jfjY");class a{constructor(t,e,n,i){this.position=t,this.image=e,this.size=n,this.imageScale=i}}class r{constructor(t,e,n,i,o,a,r,s){this.center=t,this.grow=e,this.sectionHeight=n,this.contentWidth=i,this.padding=o,this.blurRadius=a,this.backgroundFadeRadius=r,this.sections=s}static default(){const t=[{image:"assets/iv.jpg",title:"IV - Racer",year:2002,event:"The Gathering",category:"pc demo",ranked:2,credits:[{name:"Rawhead",role:"gfx, modeling"},{name:"Kezoomer",role:"music"},{name:"Kezoomer's aunt",role:"vocals"},{name:"Cyberfish",role:"code, gfx, modeling, animation"}],links:[{id:"youtube",url:"https://www.youtube.com/watch?v=mHV_oIYZyEg"},{id:"pouet",url:"http://www.pouet.net/prod.php?which=5555"},{id:"github",url:"https://github.com/the-lost-souls/IV"},{id:"download",url:"https://files.scene.org/view/parties/2002/thegathering02/demo/iv_-_racer_by_tls.zip"}]},{image:"assets/anytime.jpg",title:"Anytime",year:2001,event:"Norvegia",category:"pc demo",ranked:1,credits:[{name:"Rawhead",role:"gfx, modeling"},{name:"Kezoomer",role:"music"},{name:"Cyberfish",role:"code, gfx, modeling, animation"}],links:[{id:"youtube",url:"https://www.youtube.com/watch?v=_ubBTbGcLv8"},{id:"pouet",url:"http://www.pouet.net/prod.php?which=4244"},{id:"github",url:"https://github.com/the-lost-souls/anytime"},{id:"download",url:"https://files.scene.org/view/parties/2001/norvegia01/demo/tls-anytime.zip"}]},{image:"assets/III.jpg",title:"III - Live tomorrow",event:"The Gathering",year:1999,category:"pc demo",ranked:2,credits:[{name:"Cyberfish",role:"code, gfx, modeling, animation"},{name:"Rawhead",role:"gfx, modeling"},{name:"Kezoomer",role:"music"}],links:[{id:"youtube",url:"https://youtu.be/rMkFe3xxZmA"},{id:"pouet",url:"http://www.pouet.net/prod.php?which=5919"},{id:"github",url:"https://github.com/the-lost-souls/III"},{id:"download",url:"https://files.scene.org/view/parties/1999/thegathering99/demo/iii__liv.zip"}]},{image:"assets/cucumber01.jpg",title:"Cucumber Slumber",event:"The Gathering",year:1999,category:"fast intro",ranked:1,credits:[{name:"Cyberfish",role:"code, gfx, animation"},{name:"Kezoomer",role:"music, gfx, modeling"},{name:"tChr/ELQ",role:"gfx"}],links:[{id:"youtube",url:"https://youtu.be/ClB6vvaWzMg"},{id:"pouet",url:"https://www.pouet.net/prod.php?which=81547"},{id:"download",url:"https://files.scene.org/view/parties/1999/thegathering99/wild/fast-intro/cucumber.zip"}]},{image:"assets/FYH.jpg",title:"Follow your Heart",event:"Aasheim Party",year:1999,category:"combined demo",ranked:1,credits:[{name:"Rawhead",role:"gfx, modeling"},{name:"Kezoomer",role:"music"},{name:"Cyberfish",role:"code"}],links:[{id:"youtube",url:"https://youtu.be/AAPkby4EDQY"},{id:"pouet",url:"https://www.pouet.net/prod.php?which=81546"},{id:"download",url:"https://github.com/the-lost-souls/follow-your-heart/releases/download/final/tls_fyh.zip"}]},{image:"assets/II.jpg",title:"II",event:"The Gathering",year:1998,category:"pc demo",ranked:5,credits:[{name:"Rawhead",role:"gfx, modeling, animation"},{name:"Kezoomer",role:"music, choreography"},{name:"Cyberfish",role:"code, animation"}],links:[{id:"youtube",url:"https://youtu.be/stSv0y_zg1o"},{id:"pouet",url:"http://www.pouet.net/prod.php?which=5923"},{id:"github",url:"https://github.com/the-lost-souls/II"},{id:"download",url:"https://files.scene.org/view/parties/1998/thegathering98/demo/tls_ii.zip"}]},{image:"assets/pgp.gif",title:"pgp",event:"The Gathering",year:1997,category:"4k intro",ranked:7,credits:[{name:"Cyberfish",role:"code, gfx"}],links:[{id:"youtube",url:"https://youtu.be/Fg-FixaV6ws"},{id:"pouet",url:"http://www.pouet.net/prod.php?which=15848"},{id:"github",url:"https://github.com/the-lost-souls/pgp"},{id:"download",url:"https://files.scene.org/view/mirrors/hornet/demos/1997/t/tls_pgp.zip"}]},{image:"assets/mom02.jpg",title:"Mind over Matter",event:"The Gathering",year:1996,category:"pc demo",ranked:8,credits:[{name:"Kezoomer",role:"music"},{name:"Cyberfish",role:"code"},{name:"Rawhead",role:"gfx, modeling"}],links:[{id:"youtube",url:"https://youtu.be/UtopQ09WZ9c"},{id:"pouet",url:"http://www.pouet.net/prod.php?which=58683"},{id:"github",url:"https://github.com/the-lost-souls/mind-over-matter"},{id:"download",url:"https://files.scene.org/view/mirrors/hornet/demos/1996/t/tls_mom.zip"}]},{image:"assets/pese01.jpg",title:"PESE",event:"The Gathering",year:1996,category:"fast intro",ranked:3,credits:[{name:"Kezoomer",role:"music"},{name:"Cyberfish",role:"code"},{name:"Rawhead",role:"gfx, modeling"}],links:[{id:"youtube",url:"https://youtu.be/OlRxaUWLNgU"}]},{image:"assets/time01.png",title:"Time",event:"Tonstad Party",year:1996,category:void 0,ranked:void 0,credits:[{name:"Kezoomer",role:"music, gfx"},{name:"Cyberfish",role:"code, modeling"},{name:"Rawhead",role:"gfx, modeling"}],links:[{id:"youtube",url:"https://youtu.be/AyIQb7SAhP0"},{id:"pouet",url:"http://www.pouet.net/prod.php?which=58684"},{id:"github",url:"https://github.com/the-lost-souls/time"},{id:"download",url:"https://files.scene.org/view/parties/1996/tonstad96/demo/tls_time.zip"}]},{image:"assets/synthetic.png",title:"Synthetic",event:"Tonstad Party",year:1995,category:void 0,ranked:void 0,credits:[{name:"Kezoomer",role:"music, modeling"},{name:"Cyberfish",role:"code, gfx"},{name:"Rawhead",role:"gfx, modeling"}],links:[{id:"youtube",url:"https://youtu.be/tJvQbS8wOok"},{id:"github",url:"https://github.com/the-lost-souls/synthetic"},{id:"download",url:"https://github.com/the-lost-souls/synthetic/releases/download/final/SYN_TLS.ZIP"}]},{image:"assets/sorcerer.png",title:"Sorcerer",event:"BBS Intro",year:1995,category:void 0,ranked:void 0,credits:[{name:"Kezoomer",role:"modeling"},{name:"Cyberfish",role:"code, gfx"}],links:[{id:"youtube",url:"https://youtu.be/F_KWflqlF1g"},{id:"github",url:"https://github.com/the-lost-souls/sorcerer"},{id:"download",url:"https://github.com/the-lost-souls/sorcerer/releases/download/final/SORCERER.zip"}]},{image:"assets/tib.png",title:"Ti\xdf",event:"Melhus Party",year:1994,category:void 0,ranked:void 0,credits:[{name:"Kezoomer",role:"music, gfx"},{name:"Cyberfish",role:"code"},{name:"Rawhead",role:"code, gfx"},{name:"MTB",role:"code"},{name:"Euronymous",role:"gfx"}],links:[{id:"youtube",url:"https://youtu.be/Qd8WPVmYhX8"},{id:"github",url:"https://github.com/the-lost-souls/TiB"},{id:"download",url:"https://github.com/the-lost-souls/TiB/releases/download/final/tls_Tiss.ZIP"}]}],e={center:200,grow:3,sectionHeight:70,contentWidth:120,padding:5,blurRadius:7,backgroundFadeRadius:80,sections:t},n={center:300,grow:3,sectionHeight:112,contentWidth:200,padding:6,blurRadius:3,backgroundFadeRadius:50,sections:t};return o.isMobile(navigator.userAgent)?e:n}static flares(t){const e=[new a({x:1.5*-t.contentWidth,y:t.center-t.sectionHeight*t.grow*.5},"assets/flare5.jpg",t.padding,1.5),new a({x:1.3*t.contentWidth,y:t.center+t.sectionHeight*t.grow*.5},"assets/flare5.jpg",t.padding,.7)],n=[new a({x:-t.contentWidth,y:t.center-t.sectionHeight*t.grow*.5},"assets/flare5.jpg",t.padding,.8),new a({x:1.3*t.contentWidth,y:t.center+t.sectionHeight*t.grow*.5},"assets/flare5.jpg",t.padding,.5)];return o.isMobile(navigator.userAgent)?n:e}}class s{constructor(){this.virtualCenter=0,this.virtualTop=0,this.virtualTopStyle=""}contains(t){return!(t<this.center-this.height/2||t>this.center+this.height/2)}containsLine(t,e){const n=this.center-this.height/2,i=this.center+this.height/2;if(this.contains(t)&&this.contains(e))return 1;const o=[t,e].sort((t,e)=>t-e);if(o[0]>i||o[1]<n)return 0;const a=o[1]-o[0];return this.contains(o[0])?(o[1]-i)/a:(o[0]-n)/a}}function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var u=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],c=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function h(t,e,n,i,o,a){if(!(isNaN(a)||a<1)){a|=0;var r=function(t,e,n,i,o){if("string"==typeof t&&(t=document.getElementById(t)),!(t&&"object"===l(t)&&"getContext"in t))throw new TypeError("Expecting canvas with `getContext` method in processCanvasRGB(A) calls!");var a=t.getContext("2d");try{return a.getImageData(e,n,i,o)}catch(r){throw new Error("unable to access image data: "+r)}}(t,e,n,i,o);r=function(t,e,n,i,o,a){var r,s,l,h,f,b,p,g,m,y,_,v,w,S,k,T,I,x,E,G,N,L,O,M,A,C=t.data,z=2*a+1,P=i-1,R=o-1,D=a+1,U=D*(D+1)/2,W=new d,j=W;for(l=1;l<z;l++)j=j.next=new d,l===D&&(A=j);j.next=W;var F=null,B=null;p=b=0;var H=u[a],V=c[a];for(s=0;s<o;s++){for(T=I=x=E=g=m=y=_=0,v=D*(G=C[b]),w=D*(N=C[b+1]),S=D*(L=C[b+2]),k=D*(O=C[b+3]),g+=U*G,m+=U*N,y+=U*L,_+=U*O,j=W,l=0;l<D;l++)j.r=G,j.g=N,j.b=L,j.a=O,j=j.next;for(l=1;l<D;l++)g+=(j.r=G=C[h=b+((P<l?P:l)<<2)])*(M=D-l),m+=(j.g=N=C[h+1])*M,y+=(j.b=L=C[h+2])*M,_+=(j.a=O=C[h+3])*M,T+=G,I+=N,x+=L,E+=O,j=j.next;for(F=W,B=A,r=0;r<i;r++)C[b+3]=O=_*H>>V,0!==O?(C[b]=(g*H>>V)*(O=255/O),C[b+1]=(m*H>>V)*O,C[b+2]=(y*H>>V)*O):C[b]=C[b+1]=C[b+2]=0,g-=v,m-=w,y-=S,_-=k,v-=F.r,w-=F.g,S-=F.b,k-=F.a,h=p+((h=r+a+1)<P?h:P)<<2,g+=T+=F.r=C[h],m+=I+=F.g=C[h+1],y+=x+=F.b=C[h+2],_+=E+=F.a=C[h+3],F=F.next,v+=G=B.r,w+=N=B.g,S+=L=B.b,k+=O=B.a,T-=G,I-=N,x-=L,E-=O,B=B.next,b+=4;p+=i}for(r=0;r<i;r++){for(I=x=E=T=m=y=_=g=0,v=D*(G=C[b=r<<2]),w=D*(N=C[b+1]),S=D*(L=C[b+2]),k=D*(O=C[b+3]),g+=U*G,m+=U*N,y+=U*L,_+=U*O,j=W,l=0;l<D;l++)j.r=G,j.g=N,j.b=L,j.a=O,j=j.next;for(f=i,l=1;l<=a;l++)g+=(j.r=G=C[b=f+r<<2])*(M=D-l),m+=(j.g=N=C[b+1])*M,y+=(j.b=L=C[b+2])*M,_+=(j.a=O=C[b+3])*M,T+=G,I+=N,x+=L,E+=O,j=j.next,l<R&&(f+=i);for(b=r,F=W,B=A,s=0;s<o;s++)C[3+(h=b<<2)]=O=_*H>>V,O>0?(C[h]=(g*H>>V)*(O=255/O),C[h+1]=(m*H>>V)*O,C[h+2]=(y*H>>V)*O):C[h]=C[h+1]=C[h+2]=0,g-=v,m-=w,y-=S,_-=k,v-=F.r,w-=F.g,S-=F.b,k-=F.a,h=r+((h=s+D)<R?h:R)*i<<2,g+=T+=F.r=C[h],m+=I+=F.g=C[h+1],y+=x+=F.b=C[h+2],_+=E+=F.a=C[h+3],F=F.next,v+=G=B.r,w+=N=B.g,S+=L=B.b,k+=O=B.a,T-=G,I-=N,x-=L,E-=O,B=B.next,b+=i}return t}(r,0,0,i,o,a),t.getContext("2d").putImageData(r,e,n)}}var d=function t(){!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),this.r=0,this.g=0,this.b=0,this.a=0,this.next=null};class f{static blur(t,e,n){return e.width=256,e.height=256,e.getContext("2d").drawImage(t,0,0,256,256),h(e,0,0,256,256,n),e.toDataURL()}static prepareBackground(t,e,n,i){e.width=256,e.height=256;const o=e.getContext("2d");o.drawImage(t,0,0,256,256),h(e,0,0,256,256,n);const a=o.getImageData(0,0,e.width,e.height),r=a.width/2,s=a.height/2;for(let l=0;l<a.width;l++)for(let t=0;t<a.height;t++){const e=f.distance(l,t,r,s),n=Math.PI*Math.min(1,e/i),o=1-(Math.cos(n)+1)/2;a.data[4*(t*a.width+l)+3]=Math.round(255*o)}return o.putImageData(a,0,0),e.toDataURL()}static fadeEdges(t,e,n,i){e.width=t.width,e.height=t.height;const o=e.getContext("2d");o.drawImage(t,0,0,e.width,e.height);const a=o.getImageData(0,0,t.width,t.height);for(let r=n;r<i;r++){const t=2*Math.PI*(r/a.width-.5),e=(Math.cos(t)+1)/2;for(let n=0;n<a.height;n++)a.data[4*(n*a.width+r)+3]=Math.round(255*e)}return o.putImageData(a,0,0),e.toDataURL()}static clamp(t,e,n){return Math.max(e,Math.min(n,t))}static distance(t,e,n,i){return Math.sqrt(Math.pow(t-n,2)+Math.pow(e-i,2))}static subtractRange(t,e){const n=t.sort((t,e)=>t-e),i=e.sort((t,e)=>t-e);return n[0]>i[1]||n[1]<i[0]?t:n[0]>=i[0]&&n[1]<=i[1]?[t[0],t[0]]:n[0]<i[0]?[n[0],i[0]]:[i[1],n[1]]}}var b=n("cUpR");const p=(()=>{class t{constructor(t){this._sanitizer=t}handleScroll(t,e,n){for(let s=0;s<e.sections.length;s++){t[s].distance=n-s*e.sectionHeight;const i=(1+Math.cos(Math.min(1,Math.abs(t[s].distance/e.sectionHeight/2))*Math.PI))/2;t[s].scale=1+(e.grow-1)*i,t[s].height=e.sectionHeight*t[s].scale}const i=f.clamp(Math.floor(n/e.sectionHeight+.5),0,e.sections.length-1),o=f.clamp(t[i].distance/e.sectionHeight,-.5,.5),a=e.center+i*e.sectionHeight-(t[i].height-e.sectionHeight)*o;t[i].center=a,t[i].translate=t[i].center-t[i].virtualCenter;let r=a-t[i].height/2;for(let s=i-1;s>=0;s--)t[s].center=r-=t[s].height/2,t[s].translate=t[s].center-t[s].virtualCenter,r-=t[s].height/2;r=a+t[i].height/2;for(let s=i+1;s<e.sections.length;s++)t[s].center=r+=t[s].height/2,t[s].translate=t[s].center-t[s].virtualCenter,r+=t[s].height/2;for(let s=0;s<e.sections.length;s++)t[s].focus=f.clamp(1-Math.abs(t[s].distance/e.sectionHeight),0,1)}updateTransforms(t,e,n){for(let i=0;i<e.sections.length;i++)t[i].transform=this._sanitizer.bypassSecurityTrustStyle(`translateY(${t[i].translate}px)`+"translateZ(-1em)"+`scale(${t[i].scale})`)}updateBackgroundTransforms(t,e,n,i){for(let o=0;o<e.sections.length;o++)t[o].backgroundTransform=this._sanitizer.bypassSecurityTrustStyle("translateY(-50%)translateX(-50%)translateZ(-2em)"+`translateY(${-t[o].distance/e.sectionHeight*e.sectionHeight*.5}px)`+`rotateZ(${n}deg)`+`scale(${i})`+`scale( ${1/t[o].scale})`)}getPolygons(t,e,n){const i=[];for(const o of t){const t=o.center-n,a=(e.sectionHeight-e.padding)*o.scale,r=t-a/2,s=t+a/2,l=-2e3,u=2e3;i.push([[l,r],[u,r],[u,s],[l,s]])}return i}}return t.ngInjectableDef=i.Cb({factory:function(){return new t(i.Gb(b.b))},token:t,providedIn:"root"}),t})();class g{constructor(){this.fadeIn=!1}ngOnInit(){}goodbye(){this.fadeIn=!0}}class m{constructor(t,e,n,i,o,a){this._on=e,this._off=n,this._durationOn=i,this._durationOff=o,this._callback=a,this._done=!0,this._previousState=!1,this._state=!1,this._start=0,this._value=t?this._on:this._off}set state(t){this.state!==t&&(this._state=t,cancelAnimationFrame(this._animationFrameId),this._animationFrameId=requestAnimationFrame(t=>this.animate(t)))}get state(){return this._state}animate(t){this.state!==this._previousState&&(this._start=this.state?t-this._value*this._durationOn*1e3:t-(1-this._value)*this._durationOff*1e3,this._previousState=this.state,this._done=!1),this.state?(this._value=f.clamp((t-this._start)/(1e3*this._durationOn),0,1),1===this._value&&(this._done=!0)):(this._value=f.clamp(1-(t-this._start)/(1e3*this._durationOff),0,1),0===this._value&&(this._done=!0)),this._done||requestAnimationFrame(t=>this.animate(t)),this._callback(this._value)}}const y=n("VCwm");class _{constructor(t){this._sanitizer=t,this._polygons=[],this.image="",this.size=10,this.imageScale=1,this._animateScale=new m(!1,1,0,.7,.4,t=>{this._startScale=t,this.updateTransform()}),this._startScale=0}set position(t){const e=t.x-this.size/2,n=t.x+this.size/2,i=t.y-this.size/2,o=t.y+this.size/2;this._flarePolygon=[[e,i],[n,i],[n,o],[e,o]],this._position=t,this.updateTransform()}get position(){return this._position}set polygons(t){this._polygons=t,this.updateTransform()}get polygons(){return this._polygons}ngOnInit(){}fadeIn(){this._animateScale.state=!0}updateTransform(){let t=1;if(this._flarePolygon&&this._polygons&&this.polygons.length>0){const e=y.polygon.subtract(this._flarePolygon,...this.polygons)[0],n=e?y.polygon.area(e):0;t=e?n/Math.pow(this.size,2):0}this.transform=this._sanitizer.bypassSecurityTrustStyle("translateZ(1em)translateX(-50%)translateY(-50%)"+`translateY(${this.position.y}px)`+`translateX(${this.position.x}px)`+`scale(${t*this.imageScale*this._startScale})`)}}class v{constructor(t,e,n){this._carouselService=t,this._changeDetector=e,this.route=n,this.options=r.default(),this.sectionContentHeight=this.options.sectionHeight-2*this.options.padding,this.backgroundAngle=0,this.backgroundScale=1,this.layout=[],this.loadingProgress=0,this.sectionsLoaded=0,this.loaded=!1,this.showCenter=!1,this.animateBackground=!0,this.flares=r.flares(this.options),this.layout=new Array(this.options.sections.length);for(let i=0;i<this.layout.length;i++)this.layout[i]=new s}ngOnInit(){const t=this.route.snapshot.queryParamMap;this.showCenter=this.getBooleanOrDefault(t,"showcenter",!1),this.animateBackground=this.getBooleanOrDefault(t,"animatebackground",!0)}ngAfterViewInit(){const t=window.innerHeight;this.scrollPaddingTop=`${this.options.center-this.options.sectionHeight/2}px`,this.scrollPaddingBottom=`${t-this.options.center-this.options.sectionHeight/2}px`;for(let e=0;e<this.options.sections.length;e++)this.layout[e].virtualCenter=this.options.center+this.options.sectionHeight*e,this.layout[e].virtualTop=this.layout[e].virtualCenter-this.options.sectionHeight/2,this.layout[e].virtualTopStyle=this.layout[e].virtualTop+"px";this._changeDetector.detectChanges(),requestAnimationFrame(t=>this.animate(t))}animate(t){const e=this._carousel.nativeElement.scrollTop,n=this.options.sectionHeight*this.options.grow,i=1.3*Math.sqrt(Math.pow(this._carousel.nativeElement.clientWidth,2)+Math.pow(n,2))/256;e!==this._previousScrollTop&&(this._carouselService.handleScroll(this.layout,this.options,this._carousel.nativeElement.scrollTop),this._carouselService.updateTransforms(this.layout,this.options,this.backgroundAngle),this._carouselService.updateBackgroundTransforms(this.layout,this.options,this.backgroundAngle,i+this.backgroundScale),this.polygons=this._carouselService.getPolygons(this.layout,this.options,e)),this.animateBackground&&(this.backgroundAngle=3.6*t/1e3,this.backgroundScale=Math.cos(t/3e3)+1,this._carouselService.updateBackgroundTransforms(this.layout,this.options,this.backgroundAngle,i+this.backgroundScale)),this._previousScrollTop=e,requestAnimationFrame(t=>this.animate(t))}getBooleanOrDefault(t,e,n){return t.has(e)?"true"===t.get(e):n}onSectionLoaded(){this.sectionsLoaded++,this.loadingProgress=this.sectionsLoaded/this.options.sections.length,this.sectionsLoaded===this.options.sections.length&&(this.loaded=!0,setTimeout(()=>{for(const t of this._lensFlares.toArray())t.fadeIn()},0))}}const w=(()=>{class t{}return t.entry=v,t})();class S{transform(t,e){return`${t}${e}`}}var k=n("SVse"),T=n("7o/Q");class I{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new x(t,this.compare,this.keySelector))}}class x extends T.a{constructor(t,e,n){super(t),this.keySelector=n,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:n}=this;e=n?n(t):t}catch(i){return this.destination.error(i)}let n=!1;if(this.hasKey)try{const{compare:t}=this;n=t(this.key,e)}catch(i){return this.destination.error(i)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))}}class E{constructor(t){this._sanitizer=t,this.loaded=new i.l,this.linkClicked=new i.l,this._focus=0,this.focusChanged=new i.l,this.opacity=0,this.style=o.isMobile(navigator.userAgent)?{titleFontSize:15,eventFontSize:8,nameFontSize:11,roleFontSize:8}:{titleFontSize:24,eventFontSize:11,nameFontSize:15,roleFontSize:11},this._animateOpacity=new m(!1,1,0,.7,.4,t=>this.opacity=t)}set focus(t){this._focus=t,this.focusChanged.next(t)}get focus(){return this._focus}ngOnInit(){const t=new Image,e=document.createElement("canvas");t.onload=(()=>{this.backgroundImage=f.prepareBackground(t,e,this.options.blurRadius,this.options.backgroundFadeRadius),this.foregroundImage=f.fadeEdges(t,e,0,640),this.loaded.next(!0)}),t.src=this.content.image,this.contentWidth=this.options.contentWidth*this.options.grow,this.contentHeight=(this.options.sectionHeight-2*this.options.padding)*this.options.grow,this.contentTransform=this._sanitizer.bypassSecurityTrustStyle(`translateX(-50%) translateY(-50%) translateZ(2em) scale(${1/this.options.grow}) `),this.focusChanged.pipe(t=>t.lift(new I(void 0,void 0))).subscribe(t=>this._animateOpacity.state=1===t),this.clickedLink=new Array(this.content.links.length),this.clickedLink.fill(0)}openLink(t){setTimeout(()=>window.location.href=this.content.links[t].url,200),this.clickedLink[t]++,this.linkClicked.next()}}var G=i.ib({encapsulation:0,styles:[[".scroll-container-background[_ngcontent-%COMP%]{will-change:transform;position:absolute;background-color:#323246;width:100%}.screenshot[_ngcontent-%COMP%]{display:block;position:absolute;left:50%;max-height:100%;-webkit-transform:translateX(-50%) translateX(-20px) translateZ(-1em);transform:translateX(-50%) translateX(-20px) translateZ(-1em)}.background[_ngcontent-%COMP%]{position:absolute;top:50%;left:45%;height:256px;width:256px;will-change:transform;overflow:hidden;opacity:.7}.content[_ngcontent-%COMP%]{position:absolute;left:50%;top:50%;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;pointer-events:none;color:#fff;overflow:display}.actions[_ngcontent-%COMP%]{top:50%;width:32px;display:flex;flex-direction:column}.action[_ngcontent-%COMP%]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;display:flex;align-items:center;box-sizing:content-box;padding:4px 0;cursor:pointer;pointer-events:auto;will-change:transform}.action-icon[_ngcontent-%COMP%]{width:32px;height:32px;box-sizing:content-box}.text-area[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;right:0;display:flex;flex-direction:row;align-items:center;justify-content:flex-end;will-change:opacity;text-align:right}.separator[_ngcontent-%COMP%]{width:1px;margin:0 8px;-webkit-transform:scaleY(.9);transform:scaleY(.9);background-image:linear-gradient(to bottom,rgba(255,255,255,0),#fff,rgba(255,255,255,0))}.title[_ngcontent-%COMP%]{color:#fff;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;line-height:100%}.event[_ngcontent-%COMP%]{color:#d3d3d3;line-height:100%;padding-bottom:15px}.role[_ngcontent-%COMP%]{padding-top:4px;color:#d3d3d3;line-height:90%}.name[_ngcontent-%COMP%]{line-height:100%}"]],data:{animation:[{type:7,name:"boom",definitions:[{type:1,expr:":increment",animation:[{type:4,styles:{type:6,styles:{transform:" translateZ(-20em) scale(8)",opacity:0},offset:null},timings:"0.5s ease-out"},{type:4,styles:{type:6,styles:{transform:" translateZ(-20em) scale(0)",opacity:0},offset:null},timings:"1ms"},{type:4,styles:{type:6,styles:{transform:" translateZ(-20em) scale(1)",opacity:1},offset:null},timings:"100ms"}],options:null}],options:{}}]}});function N(t){return i.Ab(0,[(t()(),i.kb(0,0,null,null,6,"div",[["class","credit"]],null,null,null,null,null)),(t()(),i.kb(1,0,null,null,2,"div",[["class","role"]],[[4,"font-size",null]],null,null,null,null)),i.vb(2,2),(t()(),i.yb(3,null,[" "," "])),(t()(),i.kb(4,0,null,null,2,"div",[["class","name"]],[[4,"font-size",null]],null,null,null,null)),i.vb(5,2),(t()(),i.yb(6,null,[" "," "]))],null,function(t,e){var n=e.component,o=i.zb(e,1,0,t(e,2,0,i.tb(e.parent,0),n.style.roleFontSize,"pt"));t(e,1,0,o),t(e,3,0,e.context.$implicit.role);var a=i.zb(e,4,0,t(e,5,0,i.tb(e.parent,0),n.style.nameFontSize,"pt"));t(e,4,0,a),t(e,6,0,e.context.$implicit.name)})}function L(t){return i.Ab(0,[(t()(),i.kb(0,0,null,null,1,"div",[["class","action"]],[[24,"@boom",0]],[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.openLink(t.context.index)&&i),i},null,null)),(t()(),i.kb(1,0,null,null,0,"img",[["class","action-icon"]],[[8,"src",4]],null,null,null,null))],null,function(t,e){t(e,0,0,e.component.clickedLink[e.context.index]),t(e,1,0,i.mb(1,"assets/",e.context.$implicit.id,"-icon.png"))})}function O(t){return i.Ab(0,[i.ub(0,S,[]),(t()(),i.kb(1,0,null,null,0,"img",[["class","background"]],[[8,"src",4],[4,"transform",null]],null,null,null,null)),(t()(),i.kb(2,0,null,null,0,"img",[["class","screenshot"]],[[8,"src",4]],null,null,null,null)),(t()(),i.kb(3,0,null,null,17,"div",[["class","content"]],[[4,"width",null],[4,"height",null],[4,"transform",null]],null,null,null,null)),i.vb(4,2),i.vb(5,2),(t()(),i.kb(6,0,null,null,14,"div",[["class","text-area"]],[[4,"opacity",null]],null,null,null,null)),(t()(),i.kb(7,0,null,null,8,"div",[],null,null,null,null,null)),(t()(),i.kb(8,0,null,null,2,"div",[["class","title"]],[[4,"font-size",null]],null,null,null,null)),i.vb(9,2),(t()(),i.yb(10,null,['"','" (',")"])),(t()(),i.kb(11,0,null,null,2,"div",[["class","event"]],[[4,"font-size",null]],null,null,null,null)),i.vb(12,2),(t()(),i.yb(13,null,[""," "," ",""])),(t()(),i.Z(16777216,null,null,1,null,N)),i.jb(15,278528,null,0,k.h,[i.K,i.H,i.p],{ngForOf:[0,"ngForOf"]},null),(t()(),i.kb(16,0,null,null,1,"div",[["class","separator"]],[[4,"height",null]],null,null,null,null)),i.vb(17,2),(t()(),i.kb(18,0,null,null,2,"div",[["class","actions"]],null,null,null,null,null)),(t()(),i.Z(16777216,null,null,1,null,L)),i.jb(20,278528,null,0,k.h,[i.K,i.H,i.p],{ngForOf:[0,"ngForOf"]},null)],function(t,e){var n=e.component;t(e,15,0,n.content.credits),t(e,20,0,n.content.links)},function(t,e){var n=e.component;t(e,1,0,n.backgroundImage,n.backgroundTransform),t(e,2,0,n.foregroundImage);var o=i.zb(e,3,0,t(e,4,0,i.tb(e,0),n.contentWidth,"px")),a=i.zb(e,3,1,t(e,5,0,i.tb(e,0),n.contentHeight,"px"));t(e,3,0,o,a,n.contentTransform),t(e,6,0,n.opacity);var r=i.zb(e,8,0,t(e,9,0,i.tb(e,0),n.style.titleFontSize,"pt"));t(e,8,0,r),t(e,10,0,n.content.title,n.content.year);var s=i.zb(e,11,0,t(e,12,0,i.tb(e,0),n.style.eventFontSize,"pt"));t(e,11,0,s),t(e,13,0,n.content.ranked?"#"+n.content.ranked:"",n.content.category,n.content.event);var l=i.zb(e,16,0,t(e,17,0,i.tb(e,0),n.contentHeight,"px"));t(e,16,0,l)})}var M=i.ib({encapsulation:0,styles:[[".flare[_ngcontent-%COMP%]{position:absolute;left:50%;top:0;width:1220px;height:880px;mix-blend-mode:screen;will-change:transform;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;pointer-events:none;-webkit-transform-origin:50% 50%;transform-origin:50% 50%}"]],data:{animation:[{type:7,name:"fadeIn",definitions:[{type:0,name:"void, false",styles:{type:6,styles:{transform:"scale(0)"},offset:null},options:void 0},{type:0,name:"true",styles:{type:6,styles:{transform:"scale(1)"},offset:null},options:void 0},{type:1,expr:"* => true",animation:[{type:4,styles:null,timings:"1s 2s ease-in-out"}],options:null}],options:{}}]}});function A(t){return i.Ab(0,[(t()(),i.kb(0,0,null,null,0,"img",[["class","flare"]],[[8,"src",4],[4,"transform",null]],null,null,null,null))],null,function(t,e){var n=e.component;t(e,0,0,n.image,n.transform)})}var C=i.ib({encapsulation:0,styles:[["#goodbye[_ngcontent-%COMP%]{background-color:#323246;position:0;top:0;left:0;right:0;bottom:0;-webkit-transform:translateZ(-10em);transform:translateZ(-10em)}#goodbyetext[_ngcontent-%COMP%]{position:absolute;font-size:15pt;left:50%;top:50%;-webkit-transform:translateX(-50%) translateY(-50%);transform:translateX(-50%) translateY(-50%);color:#fff}"]],data:{animation:[{type:7,name:"fadeIn",definitions:[{type:0,name:"void, false",styles:{type:6,styles:{opacity:0},offset:null},options:void 0},{type:0,name:"true",styles:{type:6,styles:{opacity:1},offset:null},options:void 0},{type:1,expr:"* => true",animation:[{type:4,styles:null,timings:"0.5s"}],options:null}],options:{}}]}});function z(t){return i.Ab(0,[(t()(),i.kb(0,0,null,null,2,"div",[["class","overlay-and-fill"],["id","goodbye"]],[[24,"@fadeIn",0]],null,null,null,null)),(t()(),i.kb(1,0,null,null,1,"div",[["id","goodbyetext"]],null,null,null,null,null)),(t()(),i.yb(-1,null,["Bye. Please come again."]))],null,function(t,e){t(e,0,0,e.component.fadeIn)})}var P=n("iInd"),R=i.ib({encapsulation:0,styles:[[".scroll-container-background[_ngcontent-%COMP%]{will-change:transform;position:absolute;background-color:#323246;width:100%}.carousel[_ngcontent-%COMP%]{position:relative;height:100%;width:100%;overflow-x:hidden;overflow-y:auto;display:flexbox;-webkit-overflow-scrolling:touch;-ms-scroll-snap-type:y mandatory;scroll-snap-type:y mandatory;pointer-events:auto;box-sizing:border-box}.section-wrapper[_ngcontent-%COMP%]{pointer-events:none;position:relative;width:100%;scroll-snap-align:start;max-width:1600px;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%)}.section-transform[_ngcontent-%COMP%]{will-change:transform;width:100%;height:100%;position:absolute;top:0;left:0;background-color:#323246}.section[_ngcontent-%COMP%]{position:absolute;left:0;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%);background-color:#000;width:100%;box-shadow:rgba(0,0,40,.5) 0 4px 4px;overflow:hidden}.container[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:100%;width:100%;overflow:hidden}"]],data:{animation:[{type:7,name:"fadeIn",definitions:[{type:0,name:"void, false",styles:{type:6,styles:{opacity:0},offset:null},options:void 0},{type:0,name:"true",styles:{type:6,styles:{opacity:1},offset:null},options:void 0},{type:1,expr:"* => true",animation:[{type:4,styles:null,timings:"0.7s"}],options:null}],options:{}}]}});function D(t){return i.Ab(0,[(t()(),i.kb(0,0,null,null,5,"div",[["class","section-wrapper"]],[[4,"height",null]],null,null,null,null)),i.vb(1,2),(t()(),i.kb(2,0,null,null,3,"div",[["class","section-transform"]],[[4,"transform",null]],null,null,null,null)),(t()(),i.kb(3,0,null,null,2,"app-carousel-section",[["class","section"]],[[4,"height",null]],[[null,"loaded"],[null,"linkClicked"]],function(t,e,n){var i=!0,o=t.component;return"loaded"===e&&(i=!1!==o.onSectionLoaded()&&i),"linkClicked"===e&&(i=!1!==o.goodbye.goodbye()&&i),i},O,G)),i.jb(4,114688,null,0,E,[b.b],{content:[0,"content"],backgroundTransform:[1,"backgroundTransform"],options:[2,"options"],focus:[3,"focus"]},{loaded:"loaded",linkClicked:"linkClicked"}),i.vb(5,2)],function(t,e){var n=e.component;t(e,4,0,e.context.$implicit,n.layout[e.context.index].backgroundTransform,n.options,n.layout[e.context.index].focus)},function(t,e){var n=e.component,o=i.zb(e,0,0,t(e,1,0,i.tb(e.parent,0),n.options.sectionHeight,"px"));t(e,0,0,o),t(e,2,0,n.layout[e.context.index].transform);var a=i.zb(e,3,0,t(e,5,0,i.tb(e.parent,0),n.sectionContentHeight,"px"));t(e,3,0,a)})}function U(t){return i.Ab(0,[(t()(),i.kb(0,0,null,null,1,"app-lensflare",[],null,null,null,A,M)),i.jb(1,114688,[[3,4]],0,_,[b.b],{position:[0,"position"],polygons:[1,"polygons"],image:[2,"image"],imageScale:[3,"imageScale"]},null)],function(t,e){t(e,1,0,e.context.$implicit.position,e.component.polygons,e.context.$implicit.image,e.context.$implicit.imageScale)},null)}function W(t){return i.Ab(0,[(t()(),i.kb(0,0,null,null,1,"div",[["style","position: absolute; width: 100%; height: 1px; background-color: red; left: 0"]],[[4,"top",null]],null,null,null,null)),i.vb(1,2)],null,function(t,e){var n=e.component,o=i.zb(e,0,0,t(e,1,0,i.tb(e.parent,0),n.options.center,"px"));t(e,0,0,o)})}function j(t){return i.Ab(0,[i.ub(0,S,[]),i.wb(671088640,1,{_carousel:0}),i.wb(671088640,2,{goodbye:0}),i.wb(671088640,3,{_lensFlares:1}),(t()(),i.kb(4,0,null,null,9,"div",[["class","container"]],null,null,null,null,null)),(t()(),i.kb(5,0,[[1,0],["carousel",1]],null,2,"div",[["class","carousel"]],[[4,"scroll-padding-top",null],[4,"scroll-padding-bottom",null],[4,"padding-top",null],[4,"padding-bottom",null],[24,"@fadeIn",0]],null,null,null,null)),(t()(),i.Z(16777216,null,null,1,null,D)),i.jb(7,278528,null,0,k.h,[i.K,i.H,i.p],{ngForOf:[0,"ngForOf"]},null),(t()(),i.Z(16777216,null,null,1,null,U)),i.jb(9,278528,null,0,k.h,[i.K,i.H,i.p],{ngForOf:[0,"ngForOf"]},null),(t()(),i.Z(16777216,null,null,1,null,W)),i.jb(11,16384,null,0,k.i,[i.K,i.H],{ngIf:[0,"ngIf"]},null),(t()(),i.kb(12,0,null,null,1,"app-goodbye-component",[],null,null,null,z,C)),i.jb(13,114688,[[2,4]],0,g,[],null,null)],function(t,e){var n=e.component;t(e,7,0,n.options.sections),t(e,9,0,n.flares),t(e,11,0,n.showCenter),t(e,13,0)},function(t,e){var n=e.component;t(e,5,0,n.scrollPaddingTop,n.scrollPaddingBottom,n.scrollPaddingTop,n.scrollPaddingBottom,n.loaded)})}function F(t){return i.Ab(0,[(t()(),i.kb(0,0,null,null,1,"app-main",[],null,null,null,j,R)),i.jb(1,4308992,null,0,v,[p,i.h,P.a],null,null)],function(t,e){t(e,1,0)},null)}var B=i.gb("app-main",v,F,{},{},[]);n.d(e,"LazyModuleNgFactory",function(){return H});var H=i.hb(w,[],function(t){return i.rb([i.sb(512,i.j,i.U,[[8,[B]],[3,i.j],i.u]),i.sb(4608,k.k,k.j,[i.r,[2,k.q]]),i.sb(1073742336,k.b,k.b,[]),i.sb(1073742336,w,w,[])])})},CG3V:function(t,e,n){"use strict";var i;function o(t,e){return t.b===e.b&&t.a===e.a}function a(t,e){return t.b<e.b||t.b===e.b&&t.a<=e.a}function r(t,e,n){var i=e.b-t.b,o=n.b-e.b;return 0<i+o?i<o?e.a-t.a+i/(i+o)*(t.a-n.a):e.a-n.a+o/(i+o)*(n.a-t.a):0}function s(t,e,n){var i=e.b-t.b,o=n.b-e.b;return 0<i+o?(e.a-n.a)*i+(e.a-t.a)*o:0}function l(t,e){return t.a<e.a||t.a===e.a&&t.b<=e.b}function u(t,e,n){var i=e.a-t.a,o=n.a-e.a;return 0<i+o?i<o?e.b-t.b+i/(i+o)*(t.b-n.b):e.b-n.b+o/(i+o)*(n.b-t.b):0}function c(t,e,n){var i=e.a-t.a,o=n.a-e.a;return 0<i+o?(e.b-n.b)*i+(e.b-t.b)*o:0}function h(t){return a(t.b.a,t.a)}function d(t){return a(t.a,t.b.a)}function f(t,e,n,i){return(t=0>t?0:t)<=(n=0>n?0:n)?0===n?(e+i)/2:e+t/(t+n)*(i-e):i+n/(t+n)*(e-i)}function b(t){var e=_(t.b);return w(e,t.c),w(e.b,t.c),S(e,t.a),e}function p(t,e){var n=!1,i=!1;t!==e&&(e.a!==t.a&&(i=!0,T(e.a,t.a)),e.d!==t.d&&(n=!0,I(e.d,t.d)),v(e,t),i||(w(e,t.a),t.a.c=t),n||(S(e,t.d),t.d.a=t))}function g(t){var e=t.b,n=!1;t.d!==t.b.d&&(n=!0,I(t.d,t.b.d)),t.c===t?T(t.a,null):(t.b.d.a=et(t),t.a.c=t.c,v(t,et(t)),n||S(t,t.d)),e.c===e?(T(e.a,null),I(e.d,null)):(t.d.a=et(e),e.a.c=e.c,v(e,et(e))),k(t)}function m(t){var e=_(t),n=e.b;return v(e,t.e),e.a=t.b.a,w(n,e.a),e.d=n.d=t.d,e=e.b,v(t.b,et(t.b)),v(t.b,e),t.b.a=e.a,e.b.a.c=e.b,e.b.d=t.b.d,e.f=t.f,e.b.f=t.b.f,e}function y(t,e){var n=!1,i=_(t),o=i.b;return e.d!==t.d&&(n=!0,I(e.d,t.d)),v(i,t.e),v(o,e),i.a=t.b.a,o.a=e.a,i.d=o.d=t.d,t.d.a=o,n||S(i,t.d),i}function _(t){var e=new tt,n=new tt,i=t.b.h;return n.h=i,i.b.h=e,e.h=t,t.b.h=n,e.b=n,e.c=e,e.e=n,n.b=e,n.c=n,n.e=e}function v(t,e){var n=t.c,i=e.c;n.b.e=e,i.b.e=t,t.c=i,e.c=n}function w(t,e){var n=e.f,i=new it(e,n);n.e=i,e.f=i,n=i.c=t;do{n.a=i,n=n.c}while(n!==t)}function S(t,e){var n=e.d,i=new J(e,n);n.b=i,e.d=i,i.a=t,i.c=e.c,n=t;do{n.d=i,n=n.e}while(n!==t)}function k(t){var e=t.h;e.b.h=t=t.b.h,t.b.h=e}function T(t,e){var n=t.c,i=n;do{i.a=e,i=i.c}while(i!==n);(i=t.e).f=n=t.f,n.e=i}function I(t,e){var n=t.a,i=n;do{i.d=e,i=i.e}while(i!==n);(i=t.b).d=n=t.d,n.b=i}function x(t){var e=0;return Math.abs(t[1])>Math.abs(t[0])&&(e=1),Math.abs(t[2])>Math.abs(t[e])&&(e=2),e}var E=4e150;function G(t,e){t.f+=e.f,t.b.f+=e.b.f}function N(t,e,n){return n=n.a,(e=e.a).b.a===(t=t.a)?n.b.a===t?a(e.a,n.a)?0>=s(n.b.a,e.a,n.a):0<=s(e.b.a,n.a,e.a):0>=s(n.b.a,t,n.a):n.b.a===t?0<=s(e.b.a,t,e.a):(e=r(e.b.a,t,e.a))>=(t=r(n.b.a,t,n.a))}function L(t){t.a.i=null;var e=t.e;e.a.c=e.c,e.c.a=e.a,t.e=null}function O(t,e){g(t.a),t.c=!1,t.a=e,e.i=t}function M(t){var e=t.a.a;do{t=pt(t)}while(t.a.a===e);return t.c&&(O(t,e=y(bt(t).a.b,t.a.e)),t=pt(t)),t}function A(t,e,n){var i=new ft;return i.a=n,i.e=Z(t.f,e.e,i),n.i=i}function C(t,e){switch(t.s){case 100130:return 0!=(1&e);case 100131:return 0!==e;case 100132:return 0<e;case 100133:return 0>e;case 100134:return 2<=e||-2>=e}return!1}function z(t){var e=t.a,n=e.d;n.c=t.d,n.a=e,L(t)}function P(t,e,n){for(t=e,e=e.a;t!==n;){t.c=!1;var i=bt(t),o=i.a;if(o.a!==e.a){if(!i.c){z(t);break}O(i,o=y(e.c.b,o.b))}e.c!==o&&(p(et(o),o),p(e,o)),z(t),e=i.a,t=i}return e}function R(t,e,n,i,o,a){var r=!0;do{A(t,e,n.b),n=n.c}while(n!==i);for(null===o&&(o=bt(e).a.b.c);(n=(i=bt(e)).a.b).a===o.a;)n.c!==o&&(p(et(n),n),p(et(o),n)),i.f=e.f-n.f,i.d=C(t,i.f),e.b=!0,!r&&j(t,e)&&(G(n,o),L(e),g(o)),r=!1,e=i,o=n;e.b=!0,a&&B(t,e)}function D(t,e,n,i,o){var a=[e.g[0],e.g[1],e.g[2]];e.d=null,e.d=t.o&&t.o(a,n,i,t.c)||null,null===e.d&&(o?t.n||(q(t,100156),t.n=!0):e.d=n[0])}function U(t,e,n){var i=[null,null,null,null];i[0]=e.a.d,i[1]=n.a.d,D(t,e.a,i,[.5,.5,0,0],!1),p(e,n)}function W(t,e,n,i,o){var a=Math.abs(e.b-t.b)+Math.abs(e.a-t.a),r=Math.abs(n.b-t.b)+Math.abs(n.a-t.a),s=o+1;i[o]=.5*r/(a+r),i[s]=.5*a/(a+r),t.g[0]+=i[o]*e.g[0]+i[s]*n.g[0],t.g[1]+=i[o]*e.g[1]+i[s]*n.g[1],t.g[2]+=i[o]*e.g[2]+i[s]*n.g[2]}function j(t,e){var n=bt(e),i=e.a,r=n.a;if(a(i.a,r.a)){if(0<s(r.b.a,i.a,r.a))return!1;if(o(i.a,r.a)){if(i.a!==r.a){n=t.e;var l=i.a.h;if(0<=l){var u=(n=n.b).d,c=n.e,h=n.c,d=h[l];u[d]=u[n.a],h[u[d]]=d,d<=--n.a&&(1>=d?ht(n,d):a(c[u[d>>1]],c[u[d]])?ht(n,d):dt(n,d)),c[l]=null,h[l]=n.b,n.b=l}else for(n.c[-(l+1)]=null;0<n.a&&null===n.c[n.d[n.a-1]];)--n.a;U(t,et(r),i)}}else m(r.b),p(i,et(r)),e.b=n.b=!0}else{if(0>s(i.b.a,r.a,i.a))return!1;pt(e).b=e.b=!0,m(i.b),p(et(r),i)}return!0}function F(t,e){var n=bt(e),i=e.a,h=n.a,d=i.a,b=h.a,g=i.b.a,y=h.b.a,_=new it;if(s(g,t.a,d),s(y,t.a,b),d===b||Math.min(d.a,g.a)>Math.max(b.a,y.a))return!1;if(a(d,b)){if(0<s(y,d,b))return!1}else if(0>s(g,b,d))return!1;var v,w,S=g,k=d,T=y,I=b;if(a(S,k)||(v=S,S=k,k=v),a(T,I)||(v=T,T=I,I=v),a(S,T)||(v=S,S=T,T=v,v=k,k=I,I=v),a(T,k)?a(k,I)?(0>(v=r(S,T,k))+(w=r(T,k,I))&&(v=-v,w=-w),_.b=f(v,T.b,w,k.b)):(0>(v=s(S,T,k))+(w=-s(S,I,k))&&(v=-v,w=-w),_.b=f(v,T.b,w,I.b)):_.b=(T.b+k.b)/2,l(S,k)||(v=S,S=k,k=v),l(T,I)||(v=T,T=I,I=v),l(S,T)||(v=S,S=T,T=v,v=k,k=I,I=v),l(T,k)?l(k,I)?(0>(v=u(S,T,k))+(w=u(T,k,I))&&(v=-v,w=-w),_.a=f(v,T.a,w,k.a)):(0>(v=c(S,T,k))+(w=-c(S,I,k))&&(v=-v,w=-w),_.a=f(v,T.a,w,I.a)):_.a=(T.a+k.a)/2,a(_,t.a)&&(_.b=t.a.b,_.a=t.a.a),S=a(d,b)?d:b,a(S,_)&&(_.b=S.b,_.a=S.a),o(_,d)||o(_,b))return j(t,e),!1;if(!o(g,t.a)&&0<=s(g,t.a,_)||!o(y,t.a)&&0>=s(y,t.a,_)){if(y===t.a)return m(i.b),p(h.b,i),i=bt(e=M(e)).a,P(t,bt(e),n),R(t,e,et(i),i,i,!0),!0;if(g===t.a){m(h.b),p(i.e,et(h)),b=(d=n=e).a.b.a;do{d=pt(d)}while(d.a.b.a===b);return d=bt(e=d).a.b.c,n.a=et(h),R(t,e,(h=P(t,n,null)).c,i.b.c,d,!0),!0}return 0<=s(g,t.a,_)&&(pt(e).b=e.b=!0,m(i.b),i.a.b=t.a.b,i.a.a=t.a.a),0>=s(y,t.a,_)&&(e.b=n.b=!0,m(h.b),h.a.b=t.a.b,h.a.a=t.a.a),!1}return m(i.b),m(h.b),p(et(h),i),i.a.b=_.b,i.a.a=_.a,i.a.h=at(t.e,i.a),h=[0,0,0,0],_=[d.d,g.d,b.d,y.d],(i=i.a).g[0]=i.g[1]=i.g[2]=0,W(i,d,g,h,0),W(i,b,y,h,2),D(t,i,_,h,!0),pt(e).b=e.b=n.b=!0,!1}function B(t,e){for(var n=bt(e);;){for(;n.b;)e=n,n=bt(n);if(!e.b&&(n=e,null===(e=pt(e))||!e.b))break;e.b=!1;var i,o=e.a,r=n.a;if(i=o.b.a!==r.b.a)t:{var l=bt(i=e),u=i.a,c=l.a,h=void 0;if(a(u.b.a,c.b.a)){if(0>s(u.b.a,c.b.a,u.a)){i=!1;break t}pt(i).b=i.b=!0,h=m(u),p(c.b,h),h.d.c=i.d}else{if(0<s(c.b.a,u.b.a,c.a)){i=!1;break t}i.b=l.b=!0,h=m(c),p(u.e,c.b),h.b.d.c=i.d}i=!0}if(i&&(n.c?(L(n),g(r),r=(n=bt(e)).a):e.c&&(L(e),g(o),o=(e=pt(n)).a)),o.a!==r.a)if(o.b.a===r.b.a||e.c||n.c||o.b.a!==t.a&&r.b.a!==t.a)j(t,e);else if(F(t,e))break;o.a===r.a&&o.b.a===r.b.a&&(G(r,o),L(e),g(o),e=pt(n))}}function H(t,e){t.a=e;for(var n=e.c;null===n.i;)if((n=n.c)===e.c){n=t;var i=e;(h=new ft).a=i.c.b;var r=(c=n.f).a;do{r=r.a}while(null!==r.b&&!c.c(c.b,h,r.b));if(r=(u=bt(c=r.b)).a,0===s((h=c.a).b.a,i,h.a))o((h=c.a).a,i)||o(h.b.a,i)||(m(h.b),c.c&&(g(h.c),c.c=!1),p(i.c,h),H(n,i));else{var l=a(r.b.a,h.b.a)?c:u,u=void 0;c.d||l.c?(u=l===c?y(i.c.b,h.e):y(r.b.c.b,i.c).b,l.c?O(l,u):(h=n,(c=A(n,c,u)).f=pt(c).f+c.a.f,c.d=C(h,c.f)),H(n,i)):R(n,c,i.c,i.c,null,!0)}return}if(c=(h=bt(n=M(n.i))).a,(h=P(t,h,null)).c===c){var c,h=(c=h).c,d=(r=bt(n),!1);(u=n.a).b.a!==(l=r.a).b.a&&F(t,n),o(u.a,t.a)&&(p(et(h),u),h=bt(n=M(n)).a,P(t,bt(n),r),d=!0),o(l.a,t.a)&&(p(c,et(l)),c=P(t,r,null),d=!0),d?R(t,n,c.c,h,h,!0):(i=a(l.a,u.a)?et(l):u,R(t,n,i=y(c.c.b,i),i.c,i.c,!1),i.b.i.c=!0,B(t,n))}else R(t,n,h.c,c,c,!0)}function V(t,e){var n=new ft,i=b(t.b);i.a.b=E,i.a.a=e,i.b.a.b=-E,i.b.a.a=e,t.a=i.b.a,n.a=i,n.f=0,n.d=!1,n.c=!1,n.h=!0,n.b=!1,i=Z(i=t.f,i.a,n),n.e=i}function Y(t){this.a=new K,this.b=t,this.c=N}function Z(t,e,n){do{e=e.c}while(null!==e.b&&!t.c(t.b,e.b,n));return t=new K(n,e.a,e),e.a.c=t,e.a=t}function K(t,e,n){this.b=t||null,this.a=e||this,this.c=n||this}function X(){this.d=$,this.p=this.b=this.q=null,this.j=[0,0,0],this.s=100130,this.n=!1,this.o=this.a=this.e=this.f=null,this.m=!1,this.c=this.r=this.i=this.k=this.l=this.h=null}var $=0;function Q(t,e){if(t.d!==e)for(;t.d!==e;)if(t.d<e)switch(t.d){case $:q(t,100151),t.u(null);break;case 1:q(t,100152),t.t()}else switch(t.d){case 2:q(t,100154),t.v();break;case 1:q(t,100153),t.w()}}function q(t,e){t.p&&t.p(e,t.c)}function J(t,e){this.b=t||this,this.d=e||this,this.a=null,this.c=!1}function tt(){this.h=this,this.i=this.d=this.a=this.e=this.c=this.b=null,this.f=0}function et(t){return t.b.e}function nt(){this.c=new it,this.a=new J,this.b=new tt,this.d=new tt,this.b.b=this.d,this.d.b=this.b}function it(t,e){this.e=t||this,this.f=e||this,this.d=this.c=null,this.g=[0,0,0],this.h=this.a=this.b=0}function ot(){this.c=[],this.d=null,this.a=0,this.e=!1,this.b=new st}function at(t,e){if(t.e){var n,i=t.b,o=++i.a;return 2*o>i.f&&(i.f*=2,i.c=lt(i.c,i.f+1)),0===i.b?n=o:(n=i.b,i.b=i.c[i.b]),i.e[n]=e,i.c[n]=o,i.d[o]=n,i.h&&dt(i,o),n}return i=t.a++,t.c[i]=e,-(i+1)}function rt(t){if(0===t.a)return ct(t.b);var e=t.c[t.d[t.a-1]];if(0!==t.b.a&&a(ut(t.b),e))return ct(t.b);do{--t.a}while(0<t.a&&null===t.c[t.d[t.a-1]]);return e}function st(){this.d=lt([0],33),this.e=[null,null],this.c=[0,0],this.a=0,this.f=32,this.b=0,this.h=!1,this.d[1]=1}function lt(t,e){for(var n=Array(e),i=0;i<t.length;i++)n[i]=t[i];for(;i<e;i++)n[i]=0;return n}function ut(t){return t.e[t.d[1]]}function ct(t){var e=t.d,n=t.e,i=t.c,o=e[1],a=n[o];return 0<t.a&&(e[1]=e[t.a],i[e[1]]=1,n[o]=null,i[o]=t.b,t.b=o,0<--t.a&&ht(t,1)),a}function ht(t,e){for(var n=t.d,i=t.e,o=t.c,r=e,s=n[r];;){var l=r<<1;l<t.a&&a(i[n[l+1]],i[n[l]])&&(l+=1);var u=n[l];if(l>t.a||a(i[s],i[u])){n[r]=s,o[s]=r;break}n[r]=u,o[u]=r,r=l}}function dt(t,e){for(var n=t.d,i=t.e,o=t.c,r=e,s=n[r];;){var l=r>>1,u=n[l];if(0===l||a(i[u],i[s])){n[r]=s,o[s]=r;break}n[r]=u,o[u]=r,r=l}}function ft(){this.e=this.a=null,this.f=0,this.c=this.b=this.h=this.d=!1}function bt(t){return t.e.c.b}function pt(t){return t.e.a.b}(i=X.prototype).x=function(){Q(this,$)},i.B=function(t,e){switch(t){case 100142:return;case 100140:switch(e){case 100130:case 100131:case 100132:case 100133:case 100134:return void(this.s=e)}break;case 100141:return void(this.m=!!e);default:return void q(this,100900)}q(this,100901)},i.y=function(t){switch(t){case 100142:return 0;case 100140:return this.s;case 100141:return this.m;default:q(this,100900)}return!1},i.A=function(t,e,n){this.j[0]=t,this.j[1]=e,this.j[2]=n},i.z=function(t,e){var n=e||null;switch(t){case 100100:case 100106:this.h=n;break;case 100104:case 100110:this.l=n;break;case 100101:case 100107:this.k=n;break;case 100102:case 100108:this.i=n;break;case 100103:case 100109:this.p=n;break;case 100105:case 100111:this.o=n;break;case 100112:this.r=n;break;default:q(this,100900)}},i.C=function(t,e){var n=!1,i=[0,0,0];Q(this,2);for(var o=0;3>o;++o){var a=t[o];-1e150>a&&(a=-1e150,n=!0),1e150<a&&(a=1e150,n=!0),i[o]=a}n&&q(this,100155),null===(n=this.q)?p(n=b(this.b),n.b):(m(n),n=n.e),n.a.d=e,n.a.g[0]=i[0],n.a.g[1]=i[1],n.a.g[2]=i[2],n.f=1,n.b.f=-1,this.q=n},i.u=function(t){Q(this,$),this.d=1,this.b=new nt,this.c=t},i.t=function(){Q(this,1),this.d=2,this.q=null},i.v=function(){Q(this,2),this.d=1},i.w=function(){Q(this,1),this.d=$;var t=!1,e=[u=this.j[0],n=this.j[1],r=this.j[2]];if(0===u&&0===n&&0===r){for(var n=[-2e150,-2e150,-2e150],i=[2e150,2e150,2e150],r=[],l=[],u=(t=this.b.c).e;u!==t;u=u.e)for(var c=0;3>c;++c){var f=u.g[c];f<i[c]&&(i[c]=f,l[c]=u),f>n[c]&&(n[c]=f,r[c]=u)}if(u=0,n[1]-i[1]>n[0]-i[0]&&(u=1),n[2]-i[2]>n[u]-i[u]&&(u=2),i[u]>=n[u])e[0]=0,e[1]=0,e[2]=1;else{for(n=0,i=l[u],l=[0,0,0],i=[i.g[0]-(r=r[u]).g[0],i.g[1]-r.g[1],i.g[2]-r.g[2]],c=[0,0,0],u=t.e;u!==t;u=u.e)c[0]=u.g[0]-r.g[0],c[1]=u.g[1]-r.g[1],c[2]=u.g[2]-r.g[2],l[0]=i[1]*c[2]-i[2]*c[1],l[1]=i[2]*c[0]-i[0]*c[2],l[2]=i[0]*c[1]-i[1]*c[0],(f=l[0]*l[0]+l[1]*l[1]+l[2]*l[2])>n&&(n=f,e[0]=l[0],e[1]=l[1],e[2]=l[2]);0>=n&&(e[0]=e[1]=e[2]=0,e[x(i)]=1)}t=!0}for(n=((l=x(e))+1)%3,r=(l+2)%3,l=0<e[l]?1:-1,e=(u=this.b.c).e;e!==u;e=e.e)e.b=e.g[n],e.a=l*e.g[r];if(t){for(e=0,u=(t=this.b.a).b;u!==t;u=u.b)if(!(0>=(n=u.a).f))do{e+=(n.a.b-n.b.a.b)*(n.a.a+n.b.a.a),n=n.e}while(n!==u.a);if(0>e)for(t=(e=this.b.c).e;t!==e;t=t.e)t.a=-t.a}for(this.n=!1,u=(e=this.b.b).h;u!==e;u=t)t=u.h,n=u.e,o(u.a,u.b.a)&&u.e.e!==u&&(U(this,n,u),g(u),n=(u=n).e),n.e===u&&(n!==u&&(n!==t&&n!==t.b||(t=t.h),g(n)),u!==t&&u!==t.b||(t=t.h),g(u));for(this.e=e=new ot,u=(t=this.b.c).e;u!==t;u=u.e)u.h=at(e,u);for(function(t){t.d=[];for(var e=0;e<t.a;e++)t.d[e]=e;t.d.sort(function(t){return function(e,n){return a(t[e],t[n])?1:-1}}(t.c)),t.e=!0,function(t){for(var e=t.a;1<=e;--e)ht(t,e);t.h=!0}(t.b)}(e),this.f=new Y(this),V(this,-E),V(this,E);null!==(e=rt(this.e));){for(;;){t:if(u=this.e,0===u.a)t=ut(u.b);else if(t=u.c[u.d[u.a-1]],0!==u.b.a&&(u=ut(u.b),a(u,t))){t=u;break t}if(null===t||!o(t,e))break;t=rt(this.e),U(this,e.c,t.c)}H(this,e)}for(this.a=this.f.a.a.b.a.a,e=0;null!==(t=this.f.a.a.b);)t.h||++e,L(t);for(this.f=null,(e=this.e).b=null,e.d=null,this.e=e.c=null,u=(e=this.b).a.b;u!==e.a;u=t)t=u.b,(u=u.a).e.e===u&&(G(u.c,u),g(u));if(!this.n){if(e=this.b,this.m)for(u=e.b.h;u!==e.b;u=t)t=u.h,u.b.d.c!==u.d.c?u.f=u.d.c?1:-1:g(u);else for(u=e.a.b;u!==e.a;u=t)if(t=u.b,u.c){for(u=u.a;a(u.b.a,u.a);u=u.c.b);for(;a(u.a,u.b.a);u=u.e);for(n=u.c.b,r=void 0;u.e!==n;)if(a(u.b.a,n.a)){for(;n.e!==u&&(h(n.e)||0>=s(n.a,n.b.a,n.e.b.a));)n=(r=y(n.e,n)).b;n=n.c.b}else{for(;n.e!==u&&(d(u.c.b)||0<=s(u.b.a,u.a,u.c.b.a));)u=(r=y(u,u.c.b)).b;u=u.e}for(;n.e.e!==u;)n=(r=y(n.e,n)).b}if(this.h||this.i||this.k||this.l)if(this.m){for(t=(e=this.b).a.b;t!==e.a;t=t.b)if(t.c){this.h&&this.h(2,this.c),u=t.a;do{this.k&&this.k(u.a.d,this.c),u=u.e}while(u!==t.a);this.i&&this.i(this.c)}}else{for(t=!!this.l,u=!1,n=-1,r=(e=this.b).a.d;r!==e.a;r=r.d)if(r.c){u||(this.h&&this.h(4,this.c),u=!0),l=r.a;do{t&&n!==(i=l.b.d.c?0:1)&&(n=i,this.l&&this.l(!!n,this.c)),this.k&&this.k(l.a.d,this.c),l=l.e}while(l!==r.a)}u&&this.i&&this.i(this.c)}if(this.r){for(u=(e=this.b).a.b;u!==e.a;u=t)if(t=u.b,!u.c){r=(n=u.a).e,l=void 0;do{r=(l=r).e,l.d=null,null===l.b.d&&(l.c===l?T(l.a,null):(l.a.c=l.c,v(l,et(l))),(i=l.b).c===i?T(i.a,null):(i.a.c=i.c,v(i,et(i))),k(l))}while(l!==n);n=u.d,(u=u.b).d=n,n.b=u}return this.r(this.b),void(this.c=this.b=null)}}this.b=this.c=null},this.libtess={GluTesselator:X,windingRule:{GLU_TESS_WINDING_ODD:100130,GLU_TESS_WINDING_NONZERO:100131,GLU_TESS_WINDING_POSITIVE:100132,GLU_TESS_WINDING_NEGATIVE:100133,GLU_TESS_WINDING_ABS_GEQ_TWO:100134},primitiveType:{GL_LINE_LOOP:2,GL_TRIANGLES:4,GL_TRIANGLE_STRIP:5,GL_TRIANGLE_FAN:6},errorType:{GLU_TESS_MISSING_BEGIN_POLYGON:100151,GLU_TESS_MISSING_END_POLYGON:100153,GLU_TESS_MISSING_BEGIN_CONTOUR:100152,GLU_TESS_MISSING_END_CONTOUR:100154,GLU_TESS_COORD_TOO_LARGE:100155,GLU_TESS_NEED_COMBINE_CALLBACK:100156},gluEnum:{GLU_TESS_MESH:100112,GLU_TESS_TOLERANCE:100142,GLU_TESS_WINDING_RULE:100140,GLU_TESS_BOUNDARY_ONLY:100141,GLU_INVALID_ENUM:100900,GLU_INVALID_VALUE:100901,GLU_TESS_BEGIN:100100,GLU_TESS_VERTEX:100101,GLU_TESS_END:100102,GLU_TESS_ERROR:100103,GLU_TESS_EDGE_FLAG:100104,GLU_TESS_COMBINE:100105,GLU_TESS_BEGIN_DATA:100106,GLU_TESS_VERTEX_DATA:100107,GLU_TESS_END_DATA:100108,GLU_TESS_ERROR_DATA:100109,GLU_TESS_EDGE_FLAG_DATA:100110,GLU_TESS_COMBINE_DATA:100111}},X.prototype.gluDeleteTess=X.prototype.x,X.prototype.gluTessProperty=X.prototype.B,X.prototype.gluGetTessProperty=X.prototype.y,X.prototype.gluTessNormal=X.prototype.A,X.prototype.gluTessCallback=X.prototype.z,X.prototype.gluTessVertex=X.prototype.C,X.prototype.gluTessBeginPolygon=X.prototype.u,X.prototype.gluTessBeginContour=X.prototype.t,X.prototype.gluTessEndContour=X.prototype.v,X.prototype.gluTessEndPolygon=X.prototype.w,t.exports=this.libtess},MVTV:function(t,e,n){"use strict";function i(t){return Math.sqrt(t.slice(0,3).reduce(function(t,e,n){return t+e*e},0))}function o(t,e){return t.slice(0,3).map(function(t,n){return t-e[n]})}Object.defineProperty(e,"__esModule",{value:!0}),e.cross=function(t,e){return[(t=2===t.length?[t[0],t[1],0]:t)[1]*(e=2===e.length?[e[0],e[1],0]:e)[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]},e.length=i,e.dot=function(t,e){return t.reduce(function(t,n,i){return t+n*e[i]},0)},e.normalize=function(t){var e=i(t);return t.slice(0,3).map(function(t){return t/e})},e.add=function(t,e){return t.slice(0,3).map(function(t,n){return t+e[n]})},e.subtract=o,e.sub=o},VCwm:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.tesselator=e.polygon=void 0;var i=a(n("zM0i")),o=a(n("uXLQ"));function a(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}e.polygon=o,e.tesselator=i,"undefined"!=typeof window&&(window.PolygonTools={polygon:o,tesselator:i,version:window.polygon_tools_version||"",build:window.polygon_tools_rev||""})},jfjY:function(t,e,n){"use strict";t.exports=a,t.exports.isMobile=a;var i=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,o=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i;function a(t){t||(t={});var e=t.ua;return e||"undefined"==typeof navigator||(e=navigator.userAgent),e&&e.headers&&"string"==typeof e.headers["user-agent"]&&(e=e.headers["user-agent"]),"string"==typeof e&&(t.tablet?o.test(e):i.test(e))}},uXLQ:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WINDING_CW=e.WINDING_CCW=e.WINDING_UNKNOWN=void 0;var i=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,o=!1,a=void 0;try{for(var r,s=t[Symbol.iterator]();!(i=(r=s.next()).done)&&(n.push(r.value),!e||n.length!==e);i=!0);}catch(l){o=!0,a=l}finally{try{!i&&s.return&&s.return()}finally{if(o)throw a}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")};e.ccw=function(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(n[0]-t[0])*(e[1]-t[1])},e.normal=c,e.area=h,e.centroid=function(t){var e=t.reduce(function(e,n,o){var a=i(e,2),r=t[o+1]||t[0],s=n[0]*r[1]-r[0]*n[1];return[a[0]+(n[0]+r[0])*s,a[1]+(n[1]+r[1])*s]},[0,0]),n=i(e,2),o=n[0],a=n[1],r=h(t);return 0!==o&&(o/=6*Math.abs(r)),0!==a&&(a/=6*Math.abs(r)),r<0&&(o=-o,a=-a),[o,a]},e.is_ccw=d,e.is_cw=f,e.winding=function(t){var e=h(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null);return e<0?u:e>0?l:s},e.bounds=b,e.ensure_cw=p,e.ensure_ccw=g,e.triangulate=function(t,e){if(!t||t.length<3)return t;var n=b(t);return e=e.filter(function(t){var e=b(t);return!(e.xMin>n.xMax||e.yMin>n.yMax||e.xMax<n.xMin||e.yMax<n.yMin)}),o.run({polygons:[t],holes:e}).reduce(function(t,e){return t.concat(e)},[])},e.subtract=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];var i={polygons:[g(e[0])],holes:e.slice(1).map(function(t){return p(t)}),boundaryOnly:!0,autoWinding:!1};return o.run(i)},e.union=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];var i={polygons:e.map(function(t){return g(t)}),boundaryOnly:!0,autoWinding:!1};return o.run(i)},e.intersection=function(t,e){var n={polygons:[g(t),g(e)],boundaryOnly:!0,windingRule:o.GLU_TESS_WINDING_ABS_GEQ_TWO,autoWinding:!1};return o.run(n)};var o=r(n("zM0i")),a=r(n("MVTV"));function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}var s=e.WINDING_UNKNOWN=0,l=e.WINDING_CCW=1,u=e.WINDING_CW=2;function c(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t.length<3)return null;var n=t.map(function(t){return t.length>=3?t:[t[0],t[1],0]});if(!e){var o=i(n,3),r=o[0],s=o[2],l=a.subtract(o[1],r),u=a.subtract(s,r),c=a.normalize(a.cross(l,u));if(!c.some(function(t){return isNaN(t)}))return c;if(3===t.length)return null}var h=[0,0,0];return n.forEach(function(e,i){var o=n[(i+1)%t.length];h[0]=h[0]+(e[1]-o[1])*(e[2]+o[2]),h[1]=h[1]+(e[2]-o[2])*(e[0]+o[0]),h[2]=h[2]+(e[0]-o[0])*(e[1]+o[1])}),(h=a.normalize(h)).some(function(t){return isNaN(t)})?null:h}function h(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(t.length<3)return 0;if(t[0].length<3)return t.reduce(function(e,n,i){var o=t[i+1]||t[0];return e+n[0]*o[1]-o[0]*n[1]},0)/2;var n=t.length,i=e||c(t),o=[0,0,0];if(!i)return 0;for(var r=0;r<n;++r)o=a.add(o,a.cross(t[r],t[(r+1)%n]));return a.dot(o,i)/2}function d(t){return h(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null)>0}function f(t){return h(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null)<0}function b(t){var e=[Number.MAX_VALUE,Number.MAX_VALUE],n=[-Number.MAX_VALUE,-Number.MAX_VALUE];return t.forEach(function(t){for(var i=0;i<Math.min(3,t.length);++i)e[i]=Math.min(e[i],t[i]),n[i]=Math.max(n[i],t[i])}),{xMin:e[0],yMin:e[1],xMax:n[0],yMax:n[1]}}function p(t){return d(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null)&&t.reverse(),t}function g(t){return f(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null)&&t.reverse(),t}},zM0i:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Tesselator=e.DEFAULT_OPTIONS=e.GLU_TESS_WINDING_ABS_GEQ_TWO=e.GLU_TESS_WINDING_NEGATIVE=e.GLU_TESS_WINDING_POSITIVE=e.GLU_TESS_WINDING_NONZERO=e.GLU_TESS_WINDING_ODD=e.GL_TRIANGLE_FAN=e.GL_TRIANGLE_STRIP=e.GL_TRIANGLES=e.GL_LINE_LOOP=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();e.run=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,e=new p(t.vertexSize).run(t);return t.boundaryOnly?e:e.map(g)};var o=n("CG3V"),a=n("uXLQ"),r=o.primitiveType.GL_LINE_LOOP,s=o.primitiveType.GL_TRIANGLES,l=o.primitiveType.GL_TRIANGLE_STRIP,u=o.primitiveType.GL_TRIANGLE_FAN;e.GL_LINE_LOOP=r,e.GL_TRIANGLES=s,e.GL_TRIANGLE_STRIP=l,e.GL_TRIANGLE_FAN=u;var c=o.windingRule.GLU_TESS_WINDING_NONZERO,h=o.windingRule.GLU_TESS_WINDING_POSITIVE,d=o.windingRule.GLU_TESS_WINDING_NEGATIVE,f=o.windingRule.GLU_TESS_WINDING_ABS_GEQ_TWO;e.GLU_TESS_WINDING_ODD=o.windingRule.GLU_TESS_WINDING_ODD,e.GLU_TESS_WINDING_NONZERO=c,e.GLU_TESS_WINDING_POSITIVE=h,e.GLU_TESS_WINDING_NEGATIVE=d,e.GLU_TESS_WINDING_ABS_GEQ_TWO=f;var b=e.DEFAULT_OPTIONS={polygons:[],holes:[],windingRule:h,boundaryOnly:!1,normal:null,autoWinding:!0},p=e.Tesselator=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;!function(t,n){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n._vsize=t,n._current=[],n._out=[],n._primitiveType=0,n.gluTessCallback(o.gluEnum.GLU_TESS_VERTEX_DATA,n._vertex),n.gluTessCallback(o.gluEnum.GLU_TESS_BEGIN,n._begin),n.gluTessCallback(o.gluEnum.GLU_TESS_END,n._end),n.gluTessCallback(o.gluEnum.GLU_TESS_ERROR,n._error),n.gluTessCallback(o.gluEnum.GLU_TESS_COMBINE,n._combine),n.gluTessCallback(o.gluEnum.GLU_TESS_EDGE_FLAG,n._edge),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.GluTesselator),i(e,[{key:"start",value:function(t,e){this._current=[],this._out=[],this.gluTessBeginPolygon();var n=!0,i=!1,o=void 0;try{for(var a,r=t[Symbol.iterator]();!(n=(a=r.next()).done);n=!0){var s=a.value;this.gluTessBeginContour();var l=!0,u=!1,c=void 0;try{for(var h,d=s[Symbol.iterator]();!(l=(h=d.next()).done);l=!0){var f=h.value;this.gluTessVertex(f,f)}}catch(x){u=!0,c=x}finally{try{!l&&d.return&&d.return()}finally{if(u)throw c}}this.gluTessEndContour()}}catch(x){i=!0,o=x}finally{try{!n&&r.return&&r.return()}finally{if(i)throw o}}var b=!0,p=!1,g=void 0;try{for(var m,y=e[Symbol.iterator]();!(b=(m=y.next()).done);b=!0){var _=m.value;this.gluTessBeginContour();var v=!0,w=!1,S=void 0;try{for(var k,T=_[Symbol.iterator]();!(v=(k=T.next()).done);v=!0){var I=k.value;this.gluTessVertex(I,I)}}catch(x){w=!0,S=x}finally{try{!v&&T.return&&T.return()}finally{if(w)throw S}}this.gluTessEndContour()}}catch(x){p=!0,g=x}finally{try{!b&&y.return&&y.return()}finally{if(p)throw g}}this.gluTessEndPolygon()}},{key:"run",value:function(){var t=Object.assign({},b,arguments.length>0&&void 0!==arguments[0]?arguments[0]:b),e=t.polygons,n=t.holes,i=t.autoWinding,r=t.boundaryOnly;if(!e||!e.length)throw new Error("need at least a single polygon");i&&(e=e.filter(function(t){return Math.abs((0,a.area)(t))>0}).map(function(t){return(0,a.is_cw)(t)&&t.reverse(),t}),n=n.filter(function(t){return Math.abs((0,a.area)(t))>0}).map(function(t){return(0,a.is_ccw)(t)&&t.reverse(),t}));var s=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,o=!1,a=void 0;try{for(var r,s=t[Symbol.iterator]();!(i=(r=s.next()).done)&&(n.push(r.value),!e||n.length!==e);i=!0);}catch(l){o=!0,a=l}finally{try{!i&&s.return&&s.return()}finally{if(o)throw a}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}(t.normal?t.normal:(0,a.normal)(e[0],!0),3);return this.gluTessNormal(s[0],s[1],s[2]),this.gluTessProperty(o.gluEnum.GLU_TESS_BOUNDARY_ONLY,r),this.gluTessProperty(o.gluEnum.GLU_TESS_WINDING_RULE,t.windingRule),this.start(e,n),this._out}},{key:"_begin",value:function(t){this._primitiveType=t,this._current=[]}},{key:"_end_fan",value:function(){for(var t=this._current.shift(),e=this._current.shift();this._current.length;){var n=this._current.shift();this._out.push(t,e,n),e=n}}},{key:"_end_strip",value:function(){for(var t=this._current.shift(),e=this._current.shift();this._current.length;){var n=this._current.shift();this._out.push(t,e,n),t=e,e=n}}},{key:"_end",value:function(){switch(this._primitiveType){case u:this._end_fan();break;case l:this._end_strip();break;case s:case r:default:this._out.push(this._current)}}},{key:"_vertex",value:function(t){this._current.push(t)}},{key:"_edge",value:function(){}},{key:"_error",value:function(t){console.error("error number: "+t)}},{key:"_combine",value:function(t,e,n){for(var i=0;i<4;++i)if(!e[i]){e[i]=new Array(this._vsize);for(var o=0;o<this._vsize;++o)e[i][o]=0}for(var a=new Array(this._vsize),r=0;r<this._vsize;++r)a[r]=e[0][r]*n[0]+e[1][r]*n[1]+e[2][r]*n[2]+e[3][r]*n[3];return a}}]),e}();function g(t){for(var e=[],n=0;n<t.length;n+=3)e.push([t[n],t[n+1],t[n+2]]);return e}}}]);